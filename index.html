<!DOCTYPE html>
<html lang="ja">
<head>
	<meta charset="UTF-8">
	<meta http-equiv="Content-Script-Type" content="text/javascript">
	<meta name="description" content="■">
	<meta name="keywords" content="■">
	<meta name="viewport" content="width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0,user-scalable=0">
	<link rel="stylesheet" href="css/import.css">
	<script src="js/jquery.js"></script>
	<script src="js/common.js"></script>
	<script type="text/javascript">
		$(document).ready(function() {
			var url = 'https://api.flickr.com/services/rest/?method=flickr.photos.search';
			var key = '';
			var itemLimit = 20;
			var page = 1;
			var usr = '126218952%40N06';
			var usr = '15823425@N00';

			

			function pageCounter(p) {
				var count = p;
				return function() {
					return count++;
				}
			}
			sumObj = pageCounter(2);

			function getPhoto(c) {
			page = !c ? page :c;
	    	$("#loading").addClass("ok");
				$.ajax({
					type: 'GET',
					url: url+'&api_key='+key+'&per_page='+itemLimit+'&page='+page+'+&user_id='+usr+'&format=json&nojsoncallback=1',
					dataType: 'json',
					success: function(json){
						console.log(json);
						var itemId = [];
	  		   			$("#loading").removeClass("ok");
						for ( i=0; i < json.photos.photo.length; i ++ ) {
							var farm = json.photos.photo[i].farm;
							var server = json.photos.photo[i].server;
							var secret = json.photos.photo[i].secret;
							var id = json.photos.photo[i].id;
							$('#FlickrPhotos').append('<p><a href="http://farm'+farm+'.staticflickr.com/'+server+'/'+id+'_'+secret+'_b.jpg" class="shots" ><img src="http://farm'+farm+'.staticflickr.com/'+server+'/'+id+'_'+secret+'_s.jpg" />'+'</a></p>');
						}
						return page = c;
					}
				});
			}

			getPhoto();

			$('p.btn').click(function() {
				getPhoto(sumObj());
			});
});
	</script>
	<title>■</title>
</head>
<body>
<div id="loading">
</div>
<div id="FlickrPhotos">
</div>
<p class="btn">aaaaaaa</p>
</body>
</html>